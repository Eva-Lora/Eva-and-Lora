<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<title>Eva & Lora — Save Your Sorry's Voting</title>
<style>
body { margin:0; padding:0; font-family:system-ui, sans-serif; background:#000; color:#eee; }
.container { max-width:980px; margin:20px auto; padding:10px; }
h1 { text-align:center; font-size:1.8rem; margin-bottom:5px;}
.lead { text-align:center; color:#bbb; margin-bottom:20px;}
.video-wrap { text-align:center; margin-bottom:20px;}
video { width:100%; max-width:640px; border-radius:12px;}
.track { background: rgba(255,255,255,0.03); padding:12px; border-radius:10px; margin-bottom:10px; display:flex; justify-content:space-between; flex-wrap:wrap; align-items:center; }
.track-info { flex:1; min-width:220px; }
.track-title { font-weight:700; margin-bottom:6px; }
.audio { width:100%; margin-bottom:6px; }
.vote-area { display:flex; flex-direction:column; align-items:center; min-width:90px; }
.star-btn { cursor:pointer; font-size:30px; background:transparent; border:none; transition:transform .15s; }
.star-btn:active { transform:scale(1.1); }
.star-glow { color:#ffd700; animation:pulse 1s infinite; }
@keyframes pulse { 0%,100% {text-shadow:0 0 4px #ffd700,0 0 8px #ffd700;} 50% {text-shadow:0 0 10px #ffd700,0 0 20px #ffd700;} }
.star-count { color:#ffd700; font-weight:700; font-size:1rem; }
.below-count { color:#bbb; font-size:0.9rem; margin-top:5px; text-align:center;}
footer { text-align:center; color:#bbb; margin-top:20px;}
</style>
</head>
<body>
<div class="container">

<div class="video-wrap">
  <video id="topVideo" controls>
    <source src="Thanks-2.mp4" type="video/mp4">
    Your browser does not support video playback.
  </video>
</div>

<h1>Eva & Lora — Save Your Sorry's</h1>
<p class="lead">Click the ⭐ to vote for your favourite version — the number updates immediately.</p>

<div id="tracks"></div>

<footer>Votes are stored in your browser only.</footer>
</div>

<script>
// --- TRACK LIST ---
const tracks = [
  "Save Your Sorry's-1.mp3","Save Your Sorry's-2.mp3","Eva 3.mp3","Eva 4.mp3","Eva 5.mp3",
  "Eva 6.mp3","Eva 7.mp3","Eva 8.mp3","Eva 9.mp3","Eva-10.mp3",
  "Lora-11.mp3","Lora-12.mp3","Lora-13.mp3","Lora-14.mp3","Lora-15.mp3",
  "Lora-16.mp3","Loria-17.mp3"
];

const container = document.getElementById('tracks');

tracks.forEach((file, idx) => {
  const trackNum = idx+1;
  const trackId = `track${trackNum}`;

  const div = document.createElement('div');
  div.className = 'track';
  div.innerHTML = `
    <div class="track-info">
      <div class="track-title">${trackNum}. ${file.replace(/\.[^/.]+$/,'')}</div>
      <audio class="audio" controls preload="none">
        <source src="${encodeURI(file)}" type="audio/mpeg">
      </audio>
      <div class="below-count">Votes: <span id="below-${trackId}">0</span></div>
    </div>
    <div class="vote-area">
      <button class="star-btn" id="btn-${trackId}">⭐</button>
      <div class="star-count" id="count-${trackId}">0</div>
    </div>
  `;
  container.appendChild(div);

  const btn = div.querySelector(`#btn-${trackId}`);
  const countSpan = div.querySelector(`#count-${trackId}`);
  const belowSpan = div.querySelector(`#below-${trackId}`);
  const storageKey = `voted_${trackId}`;

  // Restore vote if already clicked in this browser
  if(localStorage.getItem(storageKey)) {
    btn.classList.add('star-glow');
    btn.disabled = true;
  }

  // Click event
  btn.addEventListener('click', () => {
    if(localStorage.getItem(storageKey)) return;
    let current = parseInt(countSpan.textContent) || 0;
    current++;
    countSpan.textContent = current;
    belowSpan.textContent = current;
    btn.classList.add('star-glow');
    btn.style.transform='scale(1.25)';
    setTimeout(()=>btn.style.transform='scale(1)',300);
    localStorage.setItem(storageKey,'1');
    btn.disabled = true;
  });
});
</script>
</body>
</html>
