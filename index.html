<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<title>Eva & Lora — Save Your Sorry's Voting</title>
<style>
body {
  margin:0; padding:0;
  font-family:system-ui, sans-serif;
  background:#000; color:#eee;
}
.container { max-width:980px; margin:20px auto; padding:10px;}
h1 { text-align:center; font-size:1.8rem; margin-bottom:5px;}
.lead { text-align:center; color:#bbb; margin-bottom:20px;}
.video-wrap { text-align:center; margin-bottom:20px;}
video { width:100%; max-width:640px; border-radius:12px;}
.track { background: rgba(255,255,255,0.03); padding:12px; border-radius:10px; margin-bottom:10px; display:flex; justify-content:space-between; flex-wrap:wrap; align-items:center;}
.track-info { flex:1; min-width:220px;}
.track-title { font-weight:700; margin-bottom:6px;}
.audio { width:100%; margin-bottom:6px;}
.vote-area { display:flex; flex-direction:column; align-items:center; min-width:90px;}
.star-btn { cursor:pointer; font-size:30px; background:transparent; border:none; transition:transform .15s; }
.star-btn:active { transform:scale(1.1); }
.star-glow { color:#ffd700; animation:pulse 1s infinite; }
@keyframes pulse { 0%,100% {text-shadow:0 0 4px #ffd700,0 0 8px #ffd700;} 50% {text-shadow:0 0 10px #ffd700,0 0 20px #ffd700;} }
.star-count { color:#ffd700; font-weight:700; font-size:1rem; }
.below-count { color:#bbb; font-size:0.9rem; margin-top:5px; text-align:center;}
footer { text-align:center; color:#bbb; margin-top:20px;}
</style>
</head>
<body>
<div class="container">

<div class="video-wrap">
  <video id="topVideo" autoplay playsinline controls>
    <source src="Thanks-2.mp4" type="video/mp4">
    Your browser does not support video playback.
  </video>
</div>

<h1>Eva & Lora — Save Your Sorry's</h1>
<p class="lead">Tell us which version you like best! Click the ⭐ to vote — the number updates for everyone.</p>

<!-- TRACKS -->
<div class="track">
  <div class="track-info">
    <div class="track-title">1. Save Your Sorry's-1</div>
    <audio class="audio" controls preload="none">
      <source src="Save Your Sorry's-1.mp3" type="audio/mpeg">
    </audio>
    <div class="below-count">Votes: <span id="below-track1">—</span></div>
  </div>
  <div class="vote-area">
    <button class="star-btn" id="btn-track1">⭐</button>
    <div class="star-count" id="count-track1">—</div>
  </div>
</div>

<div class="track">
  <div class="track-info">
    <div class="track-title">2. Save Your Sorry's-2</div>
    <audio class="audio" controls preload="none">
      <source src="Save Your Sorry's-2.mp3" type="audio/mpeg">
    </audio>
    <div class="below-count">Votes: <span id="below-track2">—</span></div>
  </div>
  <div class="vote-area">
    <button class="star-btn" id="btn-track2">⭐</button>
    <div class="star-count" id="count-track2">—</div>
  </div>
</div>

<!-- Add remaining tracks 3–17 in same format -->
<div class="track">
  <div class="track-info">
    <div class="track-title">3. Eva 3</div>
    <audio class="audio" controls preload="none">
      <source src="Eva 3.mp3" type="audio/mpeg">
    </audio>
    <div class="below-count">Votes: <span id="below-track3">—</span></div>
  </div>
  <div class="vote-area">
    <button class="star-btn" id="btn-track3">⭐</button>
    <div class="star-count" id="count-track3">—</div>
  </div>
</div>

<!-- Repeat similar blocks for tracks 4 to 17 -->
<!-- Example for track 4 -->
<div class="track">
  <div class="track-info">
    <div class="track-title">4. Eva 4</div>
    <audio class="audio" controls preload="none">
      <source src="Eva 4.mp3" type="audio/mpeg">
    </audio>
    <div class="below-count">Votes: <span id="below-track4">—</span></div>
  </div>
  <div class="vote-area">
    <button class="star-btn" id="btn-track4">⭐</button>
    <div class="star-count" id="count-track4">—</div>
  </div>
</div>

<!-- ... Continue for tracks 5 to 17 ... -->

<footer>Votes are stored online. Each browser/device can vote once per track.</footer>
</div>

<script>
// CONFIG
const namespace = 'eva-lora-votes';
const totalTracks = 17;

// Initialize all track votes
for (let i = 1; i <= totalTracks; i++) {
  const btn = document.getElementById(`btn-track${i}`);
  const count = document.getElementById(`count-track${i}`);
  const below = document.getElementById(`below-track${i}`);
  const storageKey = `eva_voted_track${i}`;

  // Load initial count from CountAPI
  fetch(`https://api.countapi.xyz/get/${namespace}/track${i}`)
    .then(r=>r.ok?r.json():Promise.reject(r))
    .then(data=>{
      if(data && typeof data.value !== 'undefined'){
        count.textContent = data.value;
        below.textContent = data.value;
      } else { count.textContent='0'; below.textContent='0'; }
    }).catch(_=>{ count.textContent='0'; below.textContent='0'; });

  // Handle voting
  btn.addEventListener('click', ()=>{
    if(localStorage.getItem(storageKey)) return;
    btn.classList.add('star-glow');
    btn.style.transform='scale(1.25)';
    setTimeout(()=>btn.style.transform='scale(1)',300);

    fetch(`https://api.countapi.xyz/hit/${namespace}/track${i}`)
      .then(r=>r.ok?r.json():Promise.reject(r))
      .then(data=>{
        if(data && typeof data.value!=='undefined'){
          count.textContent = data.value;
          below.textContent = data.value;
          localStorage.setItem(storageKey,'1');
        }
      }).catch(err=>console.error(err));
  });

  if(localStorage.getItem(storageKey)){
    btn.classList.add('star-glow');
    btn.style.opacity='0.6';
  }
}
</script>
</body>
</html>
